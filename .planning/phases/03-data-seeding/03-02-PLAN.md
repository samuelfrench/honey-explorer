---
phase: 03-data-seeding
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - backend/src/main/resources/seed-data/honeys.json
  - backend/src/main/resources/seed-data/local-sources.json
  - backend/src/main/java/com/honeyexplorer/seeder/HoneySeedDto.java
  - backend/src/main/java/com/honeyexplorer/seeder/LocalSourceSeedDto.java
  - backend/src/main/java/com/honeyexplorer/seeder/DataSeeder.java
  - backend/src/main/java/com/honeyexplorer/seeder/HoneySeeder.java
  - backend/src/main/java/com/honeyexplorer/seeder/LocalSourceSeeder.java
  - backend/src/main/resources/application.properties
autonomous: true

must_haves:
  truths:
    - "Database contains 200+ honey varieties when seeder runs"
    - "Database contains 50+ local sources when seeder runs"
    - "Seeding only runs when SEED_DATA_ENABLED=true"
    - "Seeding skips if database already has data"
    - "All seeded data has verification metadata (lastVerifiedAt, verificationSource, isVerified)"
  artifacts:
    - path: "backend/src/main/resources/seed-data/honeys.json"
      provides: "200+ honey varieties with complete metadata"
      min_lines: 3000
    - path: "backend/src/main/resources/seed-data/local-sources.json"
      provides: "50+ local sources with location data"
      min_lines: 500
    - path: "backend/src/main/java/com/honeyexplorer/seeder/DataSeeder.java"
      provides: "CommandLineRunner entry point"
      contains: "CommandLineRunner"
    - path: "backend/src/main/java/com/honeyexplorer/seeder/HoneySeeder.java"
      provides: "Honey import logic"
      exports: ["seedHoneys"]
    - path: "backend/src/main/java/com/honeyexplorer/seeder/LocalSourceSeeder.java"
      provides: "LocalSource import logic"
      exports: ["seedLocalSources"]
  key_links:
    - from: "DataSeeder"
      to: "HoneySeeder.seedHoneys"
      via: "method call"
      pattern: "honeySeeder\\.seedHoneys"
    - from: "HoneySeeder"
      to: "HoneyRepository"
      via: "repository.save"
      pattern: "honeyRepository\\.save"
    - from: "LocalSourceSeeder"
      to: "LocalSourceRepository"
      via: "repository.save"
      pattern: "localSourceRepository\\.save"
---

<objective>
Curate honey and local source seed data and create CommandLineRunner seeders for database population.

Purpose: The cold start problem is critical - users need content immediately. This plan creates 200+ honeys and 50+ local sources as JSON seed data with full metadata, plus the Java infrastructure to import this data on application startup.

Output: JSON seed files with curated data, DTO classes for JSON mapping, and CommandLineRunner seeders that populate the database when enabled.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/03-data-seeding/03-RESEARCH.md
@backend/src/main/java/com/honeyexplorer/entity/Honey.java
@backend/src/main/java/com/honeyexplorer/entity/LocalSource.java
@backend/src/main/java/com/honeyexplorer/entity/enums/FloralSource.java
@backend/src/main/java/com/honeyexplorer/entity/enums/HoneyOrigin.java
@backend/src/main/java/com/honeyexplorer/entity/enums/SourceType.java
@backend/src/main/java/com/honeyexplorer/repository/HoneyRepository.java
@backend/src/main/java/com/honeyexplorer/repository/LocalSourceRepository.java
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Seed DTOs and Seeder Infrastructure</name>
  <files>
    backend/src/main/java/com/honeyexplorer/seeder/HoneySeedDto.java
    backend/src/main/java/com/honeyexplorer/seeder/LocalSourceSeedDto.java
    backend/src/main/java/com/honeyexplorer/seeder/DataSeeder.java
    backend/src/main/java/com/honeyexplorer/seeder/HoneySeeder.java
    backend/src/main/java/com/honeyexplorer/seeder/LocalSourceSeeder.java
    backend/src/main/resources/application.properties
  </files>
  <action>
Create package: com.honeyexplorer.seeder

Create HoneySeedDto.java:
- Java record with fields matching JSON structure
- Fields: name, description, floralSource (String), type (String), origin (String), region, flavorProfiles, imageUrl, thumbnailUrl, brand, priceMin (BigDecimal), priceMax (BigDecimal), certifications, umfRating (Integer), mgoRating (Integer), slug

Create LocalSourceSeedDto.java:
- Java record with fields matching JSON structure
- Fields: name, sourceType (String), description, address, city, state, zipCode, latitude (Double), longitude (Double), phone, email, website, hoursJson, heroImageUrl, thumbnailUrl, instagramHandle, facebookUrl

Create DataSeeder.java:
- @Component implementing CommandLineRunner
- @Order(1) to run early
- @Value("${seed.data.enabled:false}") boolean seedDataEnabled
- Inject HoneySeeder and LocalSourceSeeder
- run() method checks seedDataEnabled flag, logs and returns if false
- Calls honeySeeder.seedHoneys() then localSourceSeeder.seedLocalSources()
- Logs completion with counts

Create HoneySeeder.java:
- @Component class
- Inject HoneyRepository and ObjectMapper
- Method: int seedHoneys()
- Check honeyRepository.count() > 0 first, log skip and return 0 if data exists
- Load /seed-data/honeys.json from classpath using getResourceAsStream
- Parse JSON to List<HoneySeedDto> using TypeReference
- Map each DTO to Honey entity:
  - floralSource = FloralSource.valueOf(dto.floralSource())
  - type = HoneyType.valueOf(dto.type())
  - origin = HoneyOrigin.valueOf(dto.origin())
  - Set lastVerifiedAt = LocalDateTime.now()
  - Set verificationSource = "initial_seed"
  - Set isVerified = true
- Save all entities, return count

Create LocalSourceSeeder.java:
- @Component class
- Inject LocalSourceRepository and ObjectMapper
- Method: int seedLocalSources()
- Check localSourceRepository.count() > 0 first, log skip and return 0 if data exists
- Load /seed-data/local-sources.json from classpath
- Parse to List<LocalSourceSeedDto>
- Map each DTO to LocalSource entity:
  - sourceType = SourceType.valueOf(dto.sourceType())
  - Set lastVerifiedAt = LocalDateTime.now()
  - Set verificationSource = "initial_seed"
  - Set isVerified = true
  - Set isActive = true
- Save all entities, return count

Update application.properties:
- Add: seed.data.enabled=false
- Comment: # Set to true to seed database on startup (one-time operation)
  </action>
  <verify>
Run: `cd /home/sam/claude-workspace/honey-explorer/backend && ./mvnw compile -q`
Verify compilation succeeds.
  </verify>
  <done>Seeder infrastructure created, ready to import JSON data when enabled</done>
</task>

<task type="auto">
  <name>Task 2: Curate Honey Seed Data (200+ varieties)</name>
  <files>backend/src/main/resources/seed-data/honeys.json</files>
  <action>
Create seed-data directory and honeys.json with 200+ honey varieties.

Coverage targets by FloralSource (from RESEARCH.md):
- CLOVER: 20+ (most common, USA, Canada, New Zealand)
- WILDFLOWER: 25+ (region-specific from multiple origins)
- MANUKA: 20+ (UMF grades 5+, 10+, 15+, 20+ from NZ)
- ORANGE_BLOSSOM: 15+ (Florida, California, Spain)
- BUCKWHEAT: 10+ (USA, Canada)
- ACACIA: 15+ (Italy, Hungary, France)
- LAVENDER: 10+ (France, Spain)
- TUPELO: 5+ (Florida specialty)
- SAGE: 8+ (California)
- SOURWOOD: 8+ (Appalachian)
- EUCALYPTUS: 10+ (Australia)
- BLUEBERRY: 5+ (Maine, Michigan)
- AVOCADO: 5+ (California)
- LINDEN: 10+ (Germany, Hungary)
- CHESTNUT: 8+ (Italy, Turkey)
- HEATHER: 8+ (UK, Scotland)
- OTHER: 30+ (specialty varieties - coffee blossom, macadamia, etc.)

For each honey include:
- Unique, descriptive name (e.g., "New Zealand Manuka UMF 15+" not just "Manuka Honey")
- Description (1-2 sentences about taste, origin, uses)
- floralSource: Enum value (e.g., "MANUKA")
- type: RAW, CREAMED, COMB, INFUSED, or PASTEURIZED
- origin: Enum value (e.g., "NEW_ZEALAND")
- region: Specific region if applicable
- flavorProfiles: Comma-separated (e.g., "BOLD,EARTHY,COMPLEX")
- imageUrl: Use placeholder pattern "https://images.honeyexplorer.com/honeys/{slug}.webp"
- thumbnailUrl: Use placeholder pattern "https://images.honeyexplorer.com/honeys/thumbnails/{slug}.webp"
- brand: Real or realistic brand name
- priceMin/priceMax: Realistic price range
- certifications: If applicable (e.g., "UMF_15_PLUS,NON_GMO")
- umfRating/mgoRating: For Manuka only
- slug: URL-friendly version of name

Guidelines:
- Use realistic brand names (Comvita, Wedderspoon, Really Raw Honey, etc.) and generic options
- Price ranges should be realistic ($8-15 for common, $30-80 for premium Manuka)
- Ensure each floralSource+origin combination is represented
- Make descriptions informative but concise
- Variety in type (mostly RAW, some CREAMED, occasional COMB and INFUSED)
  </action>
  <verify>
Run: `cd /home/sam/claude-workspace/honey-explorer/backend && cat src/main/resources/seed-data/honeys.json | python3 -c "import json,sys; data=json.load(sys.stdin); print(f'Total honeys: {len(data)}')" 2>/dev/null || echo "JSON not valid"`
Verify output shows 200+ honeys and JSON is valid.
  </verify>
  <done>honeys.json contains 200+ curated honey varieties with complete metadata</done>
</task>

<task type="auto">
  <name>Task 3: Curate Local Source Seed Data (50+ sources)</name>
  <files>backend/src/main/resources/seed-data/local-sources.json</files>
  <action>
Create local-sources.json with 50+ local honey sources.

Coverage by SourceType:
- BEEKEEPER: 20+ (individual beekeepers across various states)
- FARM: 10+ (honey farms with production)
- FARMERS_MARKET: 10+ (markets known for honey vendors)
- APIARY: 5+ (larger apiaries)
- STORE: 3+ (specialty honey stores)
- COOPERATIVE: 2+ (beekeeping cooperatives)

Geographic distribution (US-focused initially):
- Northeast: 8+ (Maine, Vermont, New York, Pennsylvania)
- Southeast: 10+ (North Carolina, Georgia, Florida, Tennessee)
- Midwest: 8+ (Wisconsin, Michigan, Ohio, Minnesota)
- Southwest: 8+ (Texas, Arizona, New Mexico)
- West Coast: 10+ (California, Oregon, Washington)
- Mountain: 6+ (Colorado, Montana, Utah)

For each source include:
- name: Real-sounding business name
- sourceType: Enum value (e.g., "BEEKEEPER")
- description: 1-2 sentences about the operation
- address: Realistic street address
- city, state, zipCode: Real US cities
- latitude, longitude: Accurate coordinates for the city
- phone: Realistic phone number (use 555 exchange for fiction)
- email: Realistic email pattern
- website: Plausible URL (can be placeholder)
- hoursJson: JSON string with realistic hours
- heroImageUrl: Placeholder pattern "https://images.honeyexplorer.com/sources/{slug}.webp"
- thumbnailUrl: Placeholder pattern "https://images.honeyexplorer.com/sources/thumbnails/{slug}.webp"
- instagramHandle: Optional, realistic handle
- facebookUrl: Optional, realistic URL

Guidelines:
- Use real cities but fictional business names and addresses
- Coordinates should be accurate for the city (use well-known city centers)
- Hours should be realistic (farms/beekeepers often weekend-only or by appointment)
- Farmers markets should have market day/hours
- Include a mix of urban-accessible and rural locations
  </action>
  <verify>
Run: `cd /home/sam/claude-workspace/honey-explorer/backend && cat src/main/resources/seed-data/local-sources.json | python3 -c "import json,sys; data=json.load(sys.stdin); print(f'Total sources: {len(data)}')" 2>/dev/null || echo "JSON not valid"`
Verify output shows 50+ sources and JSON is valid.
  </verify>
  <done>local-sources.json contains 50+ curated local sources with complete location data</done>
</task>

</tasks>

<verification>
1. `./mvnw compile` succeeds with seeder classes
2. honeys.json parses as valid JSON with 200+ entries
3. local-sources.json parses as valid JSON with 50+ entries
4. Each honey has all required fields (floralSource, type, origin, name, slug)
5. Each local source has coordinates and address
6. Application starts with seed.data.enabled=false (no seeding)
7. Application would seed data when seed.data.enabled=true and database is empty
</verification>

<success_criteria>
- HoneySeedDto and LocalSourceSeedDto records created
- DataSeeder CommandLineRunner created with environment flag check
- HoneySeeder and LocalSourceSeeder import from JSON files
- honeys.json contains 200+ entries covering all FloralSource values
- local-sources.json contains 50+ entries across US regions
- All entries have placeholder image URLs ready for CDN replacement
- Seeding includes verification metadata (lastVerifiedAt, verificationSource, isVerified)
</success_criteria>

<output>
After completion, create `.planning/phases/03-data-seeding/03-02-SUMMARY.md`
</output>
